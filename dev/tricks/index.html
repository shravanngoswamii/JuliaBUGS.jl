<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>BUGS Implementation Tricks · JuliaBUGS.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body>
<!-- NAVBAR START -->
<style>
    @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap');

    /* Documenter.jl CSS Overrides */
    html {
        scroll-padding-top: calc(var(--navbar-height) + 1rem);
    }
    .docs-sidebar, #documenter {
        margin-top: var(--navbar-height);
    }
    .docs-version-selector {
        margin-bottom: 60px !important;
    }
    @media screen and (max-width: 1056px) {
        .docs-version-selector {
            margin-bottom: 60px !important;
        }
        .docs-sidebar {
            margin-top: 0 !important;
        }
    }
    /* End of Documenter.jl Tweaks */

    /* Color and Font Variables */
    :root {
        --heading-color: #6c757d;
        --item-color: rgb(165, 165, 165);
        --primary-bg: white;
        --hover-color: #8faad2;
        --deprecated-bg: #ff4d4d;
        --deprecated-text: white;
        --icon-color: #6c757d;
        --shadow-color: rgba(0, 0, 0, 0.1);
        --dropdown-hover-bg: #e9ecef;
        
        /* Typography */
        --font-family: "Source Sans Pro", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        --nav-link-font-size: 1.0625rem;
        --turing-title-font-size: 21.25px;
        --icon-font-size: 1.25rem;
        --dropdown-arrow-font-size: 0.6875rem;
        --badge-font-size: 0.75rem;

        /* Sizing and Spacing */
        --navbar-height: 3.75rem;
        --logo-height: 31.18px;
        --logo-width: 52.47px;
        --logo-padding-top: 7px;
        --logo-margin-left: 0.3rem;
        --title-margin-left: 0.4px;
        --title-nav-spacing: 1.7rem;
        --nav-item-margin-left: 1.3rem;
        --icon-margin-left: 1rem;
        --dropdown-padding: 1.875rem;
        --dropdown-item-width: 12.5rem;
        --dropdown-subitem-width: 15.625rem;
        --dropdown-subitem-padding: 0.125rem 0.625rem;
    }

    /* Dark Theme Variable Overrides */
    html.theme--documenter-dark {
        --heading-color: #e0e0e0;
        --item-color: #bdbdbd;
        --primary-bg: #1f2424;
        --hover-color: #ffffff;
        --icon-color: #e0e0e0;
        --shadow-color: rgba(255, 255, 255, 0.1);
        --dropdown-hover-bg: #424242;
    }

    /* Catppuccin Theme Overrides */
    html.theme--catppuccin-latte {
        --heading-color: #4c4f69;
        --primary-bg: #eff1f5;
        --icon-color: #4c4f69;
        --shadow-color: rgba(0, 0, 0, 0.1);
        --dropdown-hover-bg: #e6e9ef;
    }
    html.theme--catppuccin-frappe {
        --heading-color: #c6d0f5;
        --primary-bg: #303446;
        --icon-color: #c6d0f5;
        --shadow-color: rgba(255, 255, 255, 0.1);
        --dropdown-hover-bg: #51576d;
    }
    html.theme--catppuccin-macchiato {
        --heading-color: #cad3f5;
        --primary-bg: #24273a;
        --icon-color: #cad3f5;
        --shadow-color: rgba(255, 255, 255, 0.1);
        --dropdown-hover-bg: #494d64;
    }
    html.theme--catppuccin-mocha {
        --heading-color: #cad3f5;
        --primary-bg: #1e1e2e;
        --icon-color: #cad3f5;
        --shadow-color: rgba(255, 255, 255, 0.1);
        --dropdown-hover-bg: #45475a;
    }


    /* Main Navigation Bar */
    .ext-navigation {
        font-family: var(--font-family);
        position: fixed;
        height: var(--navbar-height);
        top: 0;
        width: 100%;
        background-color: var(--primary-bg);
        z-index: 1000;
        box-shadow: 0 2px 4px var(--shadow-color);
        display: flex;
        align-items: center;
        padding: 0 1.0625rem;
        transition: transform 0.3s, background-color 0.3s;
    }

    nav.ext-navigation .ext-navbar-logo {
        margin-left: var(--logo-margin-left);
        height: var(--logo-height);
        width: var(--logo-width);
        padding-top: var(--logo-padding-top);
    }
    
    .ext-navbar-title {
        color: var(--heading-color) !important;
        font-size: var(--turing-title-font-size) !important;
        margin-left: var(--title-margin-left);
        text-decoration: none;
        transition: color 0.2s ease;
    }
    
    .ext-navbar-title:hover {
        color: var(--hover-color) !important;
    }

    .ext-nav-links {
        display: flex;
        align-items: center;
        list-style-type: none;
        margin: 0;
        padding: 0;
        flex-grow: 1;
        margin-left: var(--title-nav-spacing);
    }

    .ext-nav-links li:first-child {
        margin-left: 0 !important;
    }

    .ext-nav-links li {
        margin-left: var(--nav-item-margin-left) !important;
    }

    .ext-nav-link {
        color: var(--heading-color) !important;
        text-decoration: none;
        font-size: var(--nav-link-font-size) !important;
        transition: color 0.2s ease;
        cursor: pointer;
    }

    .ext-nav-link:hover,
    .ext-navbar-item-single a:hover,
    .ext-navbar-icons a:hover {
        color: var(--hover-color) !important;
    }

    .ext-navbar-item-single a {
        color: var(--heading-color) !important;
    }
    
    .ext-navbar-icons {
        display: flex;
        align-items: center;
    }

    .ext-navbar-icons a {
        color: var(--icon-color) !important;
        font-size: var(--icon-font-size) !important;
        transition: color 0.2s ease;
        margin-left: var(--icon-margin-left);
    }

    .ext-menu-toggle {
        display: none;
        font-size: 1.5rem;
        color: var(--heading-color);
        cursor: pointer;
    }

    .ext-dropdown {
        display: none;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        padding: var(--dropdown-padding);
        position: absolute;
        top: var(--navbar-height);
        width: 100%;
        left: 0;
        background-color: var(--primary-bg);
        line-height: 1.875rem;
        opacity: 0;
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out, background-color 0.3s;
        transform: translateY(-0.625rem);
        box-shadow: 0 4px 6px var(--shadow-color);
    }

    #library-handler::after {
        content: "▼";
        font-size: var(--dropdown-arrow-font-size);
        margin-left: 0.3125rem;
        transition: transform 0.3s ease-in-out;
    }

    #library-handler.open::after {
        content: "▲";
    }

    .ext-dropdown.show {
        display: grid;
        opacity: 1;
        transform: translateY(0);
    }

    .ext-dropdown ul {
        width: var(--dropdown-item-width);
        margin-bottom: 1.25rem;
    }

    .ext-dropdown ul li {
        text-align: left;
        display: flex;
        align-items: center;
    }

    .ext-dropdown ul a li {
        color: var(--item-color);
        width: var(--dropdown-subitem-width);
        border-radius: 3px;
        padding: var(--dropdown-subitem-padding);
        transition: background-color 0.2s ease;
    }

    .ext-dropdown ul a li:hover {
        background-color: var(--dropdown-hover-bg);
    }

    .ext-dropdown-item-heading {
        color: var(--heading-color);
        text-align: center;
    }

    .deprecated-badge {
        background-color: var(--deprecated-bg);
        color: var(--deprecated-text);
        font-size: var(--badge-font-size);
        padding: .1rem;
        border-radius: 3px;
        margin-left: 0.5rem;
        line-height: 1;
    }

    @media (max-width: 966px) {
        .ext-dropdown {
            grid-template-columns: 1fr 1fr 1fr;
        }
    }

    @media (max-width: 768px) {
        .ext-nav-links {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            background-color: var(--primary-bg);
            position: absolute;
            top: var(--navbar-height);
            left: 0;
            padding: 0.625rem 0;
            height: auto;
            overflow-y: auto;
            box-shadow: 0 4px 6px var(--shadow-color);
            margin-left: 0;
        }

        .ext-nav-links.show {
            display: flex;
        }

        .ext-nav-links li {
            margin: 0.625rem 0 !important;
            text-align: center;
        }
        
        .ext-menu-toggle {
            display: block;
            margin-left: auto;
        }

        .ext-navigation.hide {
            transform: translateY(calc(-1 * var(--navbar-height)));
        }

        .ext-dropdown {
            position: static;
            display: block;
            opacity: 1;
            transform: none;
            box-shadow: none;
            grid-template-columns: 1fr;
            padding: 0.625rem;
            text-align: center;
        }

        .ext-dropdown ul {
            width: auto;
            display: inline-block;
            margin: 0 auto 0.3125rem;
            text-align: left;
        }
    }
</style>
<nav class="ext-navigation">
    <a href="https://turinglang.org/">
        <img src="https://turinglang.org/assets/images/turing-logo.svg" alt="Turing Logo" class="ext-navbar-logo">
    </a>
    <a class="ext-navbar-title" href="https://turinglang.org/">Turing.jl</a>
    
    <ul class="ext-nav-links">
        <li><a class="ext-nav-link" href="https://turinglang.org/docs/getting-started/">Get Started</a></li>
        <li><a class="ext-nav-link" href="https://turinglang.org/docs/tutorials/">Tutorials</a></li>
        <li><a class="ext-nav-link" href="https://turinglang.org/docs/faq/">FAQ</a></li>
        <li>
            <p class="ext-nav-link" id="library-handler">Libraries</p>
            <div class="ext-dropdown" id="ext-dropdown-items">
                <ul>
                    <li class="ext-dropdown-item-heading">Modelling Languages</li>
                    <a href="https://turinglang.org/DynamicPPL.jl/"><li>DynamicPPL</li></a>
                    <a href="https://turinglang.org/JuliaBUGS.jl/"><li>JuliaBUGS</li></a>
                    <a href="https://turinglang.org/TuringGLM.jl/"><li>TuringGLM</li></a>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading">MCMC</li>
                    <a href="https://turinglang.org/AdvancedHMC.jl/"><li>AdvancedHMC</li></a>
                    <a href="https://turinglang.org/AbstractMCMC.jl/"><li>AbstractMCMC</li></a>
                    <a href="https://github.com/theogf/ThermodynamicIntegration.jl"><li>ThermodynamicIntegration</li></a>
                    <a href="https://turinglang.org/AdvancedPS.jl/"><li>AdvancedPS</li></a>
                    <a href="https://turinglang.org/SliceSampling.jl/"><li>SliceSampling</li></a>
                    <a href="https://turinglang.org/EllipticalSliceSampling.jl/"><li>EllipticalSliceSampling</li></a>
                    <a href="https://turinglang.org/NestedSamplers.jl/"><li>NestedSamplers</li></a>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading">Diagnostics</li>
                    <a href="https://turinglang.org/MCMCChains.jl/"><li>MCMCChains</li></a>
                    <a href="https://turinglang.org/MCMCDiagnosticTools.jl/"><li>MCMCDiagnosticTools</li></a>
                    <a href="https://turinglang.org/ParetoSmooth.jl/"><li>ParetoSmooth</li></a>
                </ul>
                <ul>
                    <li class="ext-dropdown-item-heading">Gaussian Processes</li>
                    <a href="https://juliagaussianprocesses.github.io/AbstractGPs.jl/"><li>AbstractGPs</li></a>
                    <a href="https://juliagaussianprocesses.github.io/KernelFunctions.jl/"><li>KernelFunctions</li></a>
                    <a href="https://juliagaussianprocesses.github.io/ApproximateGPs.jl/"><li>ApproximateGPs</li></a>
                </ul>
                <ul><li class="ext-dropdown-item-heading ext-navbar-item-single"><a href="https://turinglang.org/Bijectors.jl/">Bijectors</a></li></ul>
                <ul><li class="ext-dropdown-item-heading ext-navbar-item-single"><a href="https://turinglang.org/TuringCallbacks.jl/">TuringCallbacks</a></li></ul>
                <ul><li class="ext-dropdown-item-heading ext-navbar-item-single"><a href="https://turinglang.org/Deprecated/TuringBenchmarking/">TuringBenchmarking</a><span class="deprecated-badge">Deprecated</span></li></ul>
            </div>
        </li>
        <li><a class="ext-nav-link" href="https://turinglang.org/news/">News</a></li>
        <li><a class="ext-nav-link" href="https://turinglang.org/team/">Team</a></li>
    </ul>

    <div class="ext-navbar-icons">
        <a href="https://x.com/TuringLang" aria-label="Turing on X"><i class="fa-brands fa-x-twitter"></i></a>
        <a href="https://discourse.julialang.org/c/domain/probprog/48" aria-label="Turing on Discourse"><i class="fa-brands fa-discourse"></i></a>
        <a href="https://julialang.slack.com/archives/CCYDC34A0" aria-label="Turing on Slack"><i class="fa-brands fa-slack"></i></a>
        <a href="https://github.com/TuringLang/" aria-label="Turing.jl on GitHub"><i class="fa-brands fa-github"></i></a>
    </div>

    <span class="ext-menu-toggle"><i class="fa-solid fa-bars"></i></span>
</nav>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const menuToggle = document.querySelector(".ext-menu-toggle");
        const navLinks = document.querySelector(".ext-nav-links");
        const nav = document.querySelector(".ext-navigation");
        const libraryHandler = document.getElementById("library-handler");
        const dropdownContainer = document.getElementById("ext-dropdown-items");
        let lastScrollY = window.scrollY;

        function closeDropdown() {
            if (dropdownContainer.classList.contains("show")) {
                libraryHandler.classList.remove("open");
                dropdownContainer.classList.remove("show");
                setTimeout(() => {
                    if (!dropdownContainer.classList.contains("show")) {
                        dropdownContainer.style.display = "none";
                    }
                }, 300);
            }
        }

        function openDropdown() {
            dropdownContainer.style.display = "grid";
            libraryHandler.classList.add("open");
            setTimeout(() => {
                dropdownContainer.classList.add("show");
            }, 10);
        }

        function setAppropriateHeight() {
            if (window.innerWidth <= 768) {
                const viewportHeight = window.innerHeight;
                const navHeight = nav.offsetHeight;
                navLinks.style.maxHeight = `${viewportHeight - navHeight}px`;
                navLinks.style.overflowY = "auto";
            } else {
                navLinks.style.maxHeight = "";
                navLinks.style.overflowY = "";
            }
        }

        menuToggle.addEventListener("click", (event) => {
            event.stopPropagation();
            navLinks.classList.toggle("show");
            if (navLinks.classList.contains("show")) {
                setAppropriateHeight();
                closeDropdown();
                dropdownContainer.style.display = "none";
            }
        });

        libraryHandler.addEventListener("click", (event) => {
            event.stopPropagation();
            event.preventDefault();
            if (dropdownContainer.classList.contains("show")) {
                closeDropdown();
            } else {
                openDropdown();
            }
            setAppropriateHeight();
        });

        // Close all menus if a click is registered outside the navigation bar.
        document.addEventListener("click", (event) => {
            if (!nav.contains(event.target)) {
                navLinks.classList.remove("show");
                closeDropdown();
            }
        });

        // Hide navigation bar on scroll down in mobile view.
        window.addEventListener("scroll", () => {
            if (window.innerWidth <= 768) {
                if (window.scrollY > lastScrollY && window.scrollY > nav.offsetHeight){
                    nav.classList.add("hide");
                } else {
                    nav.classList.remove("hide");
                }
                lastScrollY = window.scrollY;
            }
        });

        window.addEventListener("resize", setAppropriateHeight);
    });
</script>
<!-- NAVBAR END -->


<div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">JuliaBUGS.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../example/">Example</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../api/api/">General</a></li><li><a class="tocitem" href="../api/functions/">Functions</a></li><li><a class="tocitem" href="../api/distributions/">Distributions</a></li><li><a class="tocitem" href="../api/user_defined_functions/">User-Defined Functions and Distributions</a></li></ul></li><li><a class="tocitem" href="../differences/">Differences from Other BUGS Implementations</a></li><li><a class="tocitem" href="../pitfalls/">Pitfalls</a></li><li><a class="tocitem" href="../graph_plotting/">Plotting</a></li><li><a class="tocitem" href="../R_interface/">R Interface</a></li><li><span class="tocitem">For Developers</span><ul><li><a class="tocitem" href="../parser/">Parser</a></li><li><a class="tocitem" href="../BUGS_notes/">Notes on BUGS Implementations</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>BUGS Implementation Tricks</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>BUGS Implementation Tricks</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/shravanngoswamii/JuliaBUGS.jl/blob/main/docs/src/tricks.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="BUGS-Implementation-Tricks"><a class="docs-heading-anchor" href="#BUGS-Implementation-Tricks">BUGS Implementation Tricks</a><a id="BUGS-Implementation-Tricks-1"></a><a class="docs-heading-anchor-permalink" href="#BUGS-Implementation-Tricks" title="Permalink"></a></h1><h2 id="Implementing-Custom-Distributions-Without-Low-Level-Coding-in-Previous-Version-of-BUGS"><a class="docs-heading-anchor" href="#Implementing-Custom-Distributions-Without-Low-Level-Coding-in-Previous-Version-of-BUGS">Implementing Custom Distributions Without Low-Level Coding in Previous Version of BUGS</a><a id="Implementing-Custom-Distributions-Without-Low-Level-Coding-in-Previous-Version-of-BUGS-1"></a><a class="docs-heading-anchor-permalink" href="#Implementing-Custom-Distributions-Without-Low-Level-Coding-in-Previous-Version-of-BUGS" title="Permalink"></a></h2><p>In JuliaBUGS, users can simply create new distributions using the <code>Distributions.jl</code> interface and use them as built-in distributions. In previous versions of BUGS, defining new distributions required lower-level programming, as users needed to work directly with the underlying implementation.</p><p>Here we present some of the tricks that were used in previous BUGS implementations to create custom distributions without implementing them directly at the low level. These approaches are still valid in JuliaBUGS, though the native distribution interface is generally preferred.</p><h3 id="The-&quot;Zeros-Trick&quot;"><a class="docs-heading-anchor" href="#The-&quot;Zeros-Trick&quot;">The &quot;Zeros Trick&quot;</a><a id="The-&quot;Zeros-Trick&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#The-&quot;Zeros-Trick&quot;" title="Permalink"></a></h3><p>When you need a distribution not included in the standard set, the &quot;zeros trick&quot; offers an elegant solution. This technique leverages the fact that a Poisson observation with mean <span>$\phi$</span> and value 0 has likelihood <span>$e^{-\phi}$</span>.</p><p><strong>How it works:</strong></p><ol><li>Create artificial data points of zeros</li><li>Set <span>$\phi[i] = -\log(L[i]) + C$</span>, where:<ul><li><p class="math-container">\[L[i]\]</p>is your desired likelihood term</li><li><p class="math-container">\[C\]</p>is a constant large enough to ensure <span>$\phi[i] &gt; 0$</span></li></ul></li></ol><p><strong>Implementation:</strong></p><pre><code class="language-bugs hljs">C &lt;- 10000    # Large constant ensuring phi[i] &gt; 0

for (i in 1:N) {
    zeros[i] &lt;- 0
    phi[i] &lt;- -log(L[i]) + C
    zeros[i] ~ dpois(phi[i])
}</code></pre><p>This method is particularly useful for implementing truncated distributions or any arbitrary likelihood function.</p><h3 id="The-&quot;Ones-Trick&quot;"><a class="docs-heading-anchor" href="#The-&quot;Ones-Trick&quot;">The &quot;Ones Trick&quot;</a><a id="The-&quot;Ones-Trick&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#The-&quot;Ones-Trick&quot;" title="Permalink"></a></h3><p>An alternative approach uses Bernoulli observations fixed at 1:</p><p><strong>How it works:</strong></p><ol><li>Create artificial data points of ones</li><li>Define probabilities proportional to your desired likelihood: <span>$p[i] = \frac{L[i]}{C}$</span></li><li>Choose <span>$C$</span> large enough to ensure <span>$p[i] &lt; 1$</span></li></ol><p><strong>Implementation:</strong></p><pre><code class="language-bugs hljs">C &lt;- 10000    # Large constant ensuring p[i] &lt; 1

for (i in 1:N) {
    ones[i] &lt;- 1
    p[i] &lt;- L[i] / C
    ones[i] ~ dbern(p[i])
}</code></pre><h3 id="Using-dloglik-in-OpenBUGS-and-MultiBUGS"><a class="docs-heading-anchor" href="#Using-dloglik-in-OpenBUGS-and-MultiBUGS">Using <code>dloglik</code> in OpenBUGS and MultiBUGS</a><a id="Using-dloglik-in-OpenBUGS-and-MultiBUGS-1"></a><a class="docs-heading-anchor-permalink" href="#Using-dloglik-in-OpenBUGS-and-MultiBUGS" title="Permalink"></a></h3><p>The <code>dloglik</code> distribution provides a more direct approach for implementing custom likelihoods:</p><pre><code class="language-bugs hljs">dummy[i] &lt;- 0
dummy[i] ~ dloglik(logLike[i])</code></pre><p>Where <code>logLike[i]</code> is the log-likelihood contribution for observation <span>$i$</span>. This essentially implements the &quot;zeros trick&quot; behind the scenes.</p><p><strong>Example: Manual Normal Likelihood Implementation</strong></p><pre><code class="language-bugs hljs">model {
   for (i in 1:7) {
      dummy[i] &lt;- 0
      dummy[i] ~ dloglik(logLike[i])
      logLike[i] &lt;- -log(sigma) - 0.5 * pow((x[i] - mu)/sigma, 2)         
   }
   mu ~ dunif(-10, 10)
   sigma ~ dunif(0, 10)
}</code></pre><p><strong>Standard equivalent:</strong></p><pre><code class="language-bugs hljs">model {
   for (i in 1:7) {
      x[i] ~ dnorm(mu, prec)
   }
   prec &lt;- 1 / (sigma * sigma)
   mu ~ dunif(-10, 10)
   sigma ~ dunif(0, 10)
}</code></pre><h2 id="Implementing-Custom-Prior-Distributions"><a class="docs-heading-anchor" href="#Implementing-Custom-Prior-Distributions">Implementing Custom Prior Distributions</a><a id="Implementing-Custom-Prior-Distributions-1"></a><a class="docs-heading-anchor-permalink" href="#Implementing-Custom-Prior-Distributions" title="Permalink"></a></h2><p>You can use <code>dloglik</code> to implement non-standard prior distributions:</p><pre><code class="language-bugs hljs">theta ~ dflat()           # Use flat improper prior as base
dummy &lt;- 0
dummy ~ dloglik(logLike)  # Add custom prior via log-likelihood
logLike &lt;- log(desired_prior_for_theta)</code></pre><p><strong>Example: Manual Normal Prior Implementation</strong></p><pre><code class="language-bugs hljs">model {
   for (i in 1:7) {
      x[i] ~ dnorm(mu, prec)
   }
   dummy &lt;- 0
   dummy ~ dloglik(phi)
   phi &lt;- -0.5 * pow(mu, 2)  # log(N(0,1))
   mu ~ dflat()              # Base distribution
   prec &lt;- 1 / (sigma * sigma)
   sigma ~ dunif(0, 10)
}</code></pre><p><strong>Standard equivalent:</strong></p><pre><code class="language-bugs hljs">model {
   for (i in 1:7) {
      x[i] ~ dnorm(mu, prec)
   }
   mu ~ dnorm(0, 1)
   prec &lt;- 1 / (sigma * sigma)
   sigma ~ dunif(0, 10)
}</code></pre><blockquote><p><strong>Note:</strong> Using <code>dloglik</code> for priors may trigger Metropolis sampling, potentially leading to slower convergence and higher Monte Carlo errors.</p></blockquote><h2 id="Working-with-Predictions-and-Complex-Models"><a class="docs-heading-anchor" href="#Working-with-Predictions-and-Complex-Models">Working with Predictions and Complex Models</a><a id="Working-with-Predictions-and-Complex-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Working-with-Predictions-and-Complex-Models" title="Permalink"></a></h2><h3 id="Predicting-New-Observations"><a class="docs-heading-anchor" href="#Predicting-New-Observations">Predicting New Observations</a><a id="Predicting-New-Observations-1"></a><a class="docs-heading-anchor-permalink" href="#Predicting-New-Observations" title="Permalink"></a></h3><p>To generate predictions for a new observation <code>x.pred</code>, specify it as missing and assign an improper uniform prior:</p><pre><code class="language-bugs hljs">x.pred ~ dflat()  # Improper uniform prior</code></pre><p>Be aware this approach may increase computational inefficiency and Monte Carlo error.</p><h3 id="Handling-Model-Mixtures-of-Different-Complexity"><a class="docs-heading-anchor" href="#Handling-Model-Mixtures-of-Different-Complexity">Handling Model Mixtures of Different Complexity</a><a id="Handling-Model-Mixtures-of-Different-Complexity-1"></a><a class="docs-heading-anchor-permalink" href="#Handling-Model-Mixtures-of-Different-Complexity" title="Permalink"></a></h3><p>For mixture models with components of varying complexity, a standard mixture distribution approach is often sufficient without requiring reversible jump techniques:</p><pre><code class="language-bugs hljs">model {
   mu ~ dunif(-5, 5)
   p ~ dunif(0, 1)
   m[1] &lt;- 0       # First component mean
   m[2] &lt;- mu      # Second component mean
   
   for (i in 1:100) {
      group[i] ~ dbern(p)           # Component membership
      index[i] &lt;- group[i] + 1
      y[i] ~ dnorm(m[index[i]], 1)  # Observation from selected component
   }
}</code></pre><h3 id="Managing-Random-Set-Sizes"><a class="docs-heading-anchor" href="#Managing-Random-Set-Sizes">Managing Random Set Sizes</a><a id="Managing-Random-Set-Sizes-1"></a><a class="docs-heading-anchor-permalink" href="#Managing-Random-Set-Sizes" title="Permalink"></a></h3><p>When loop bounds depend on random quantities (e.g., changepoints), use step functions to conditionally include elements:</p><pre><code class="language-bugs hljs">for (i in 1:N) {
   ind[i] &lt;- 1 + step(i - K - 0.01)  # 1 if i ≤ K, 2 if i &gt; K
   y[i] ~ model[ind[i]]              # Select appropriate model
}</code></pre><p><strong>Example: Computing the Sum of First K Integers</strong></p><pre><code class="language-bugs hljs">model {
   # Define possible values for K
   for (i in 1:10) {
      p[i] &lt;- 1/10  # Equal probability for each value
      x[i] &lt;- i     # Value i
   }
   
   # Random selection of K
   K ~ dcat(p[])
   
   # Sum elements conditionally
   for (i in 1:10) {
      xtosum[i] &lt;- x[i] * step(K - i + 0.01)  # Include x[i] only if i ≤ K
   }
   
   # Compute final sum
   s &lt;- sum(xtosum[])
}</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Sunday 6 July 2025 11:11">Sunday 6 July 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
